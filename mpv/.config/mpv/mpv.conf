# vim:fdm=marker:
#
#                          88d8b.d8b. 88d888b. dP   .dP
#                          88'`88'`88 88'  `88 88   d8'
#                          88  88  88 88.  .88 88 .88'
# .----------------------- dP  dP  dP 88Y888P' 8888P' -------------------------.
# |::::::::::::::::::::::::..::..::..:88 ....::.....:::::::::::::::::::::::::::|
# |:::::::::::::::::::::::::::::::::::dP ::::::::::::::::::::::::::::::::::::::|
# |:::::::::::::::::::::::::::::::::::..:::::::::::::::::::::::::::::::::::::::|
# |----------------------------------------------------------------------------|
# |     file | ~/.config/mpv/mpv.conf                                          |
# |     desc | mpv(1) 0.22.0 media player configuration                        |
# |   author | bardisty <b@bah.im>                                             |
# |   source | https://github.com/bardisty/dotfiles                            |
# | modified | Mon Dec 12 2016 08:46:53 PST -0800                              |
# `----------------------------------------------------------------------------'


# Note:
#
# This config has only been tested on a fast computer running Linux with
# nvidia drivers (proprietary).
#
# If you experience performance issues (dropped frames / lag), try a few of
# these steps:
#
#    1.  Change the `opengl-shaders` option. Use a 'native' superxbr shader
#        rather than an 'all' one. Native superxbr shaders are faster / less
#        resource-intensive as they upscale on RGB only rather than all
#        source planes:
#
#           `superxbr--all*`: superxbr shaders of varying sharpness,
#                             triggered on all source planes (chroma, luma,
#                             RGB, etc.)
#
#           `superxbr--native*`: superxbr shaders of varying sharpness,
#                                triggered on RGB only
#
#        See the `shaders` directory for possible values or hit up
#        https://github.com/bjin/mpv-prescalers to generate your own.
#
#    2.  Remove the `opengl-shaders` option entirely.
#
#    3.  Remove everything in the :video: section except `hwdec=auto` and
#        `profile=opengl-hq`.


# Contents {{{1                                                       :contents:
# _____________


    # 1 Audio                 :audio:
    # 2 Behavior              :behavior:
    # 3 Cache                 :cache:
    # 4 Interface             :interface:
    # 5 Network               :network:
    # 6 Subtitles             :subtitles:
    # 7 Video                 :video:


    # 1 Audio                 :audio:
    #
    #     audio-channels............channel layout / number of channels
    #     ao........................priority list of audio output drivers
    #
    #
    # 2 Behavior              :behavior:
    #
    #     save-position-on-quit.....save playback position on quit
    #
    #
    # 3 Cache                 :cache:
    #
    #     cache.....................enable cache if needed
    #     cache-default.............size of cache
    #     cache-backbuffer..........size of cache back buffer
    #     cache-secs................seconds of audio/video to prefetch
    #
    #
    # 4 Interface             :interface:
    #
    #     script-opts=osc...........on screen controller options
    #
    #
    # 5 Network               :network:
    #
    #     user-agent................user agent for HTTP streaming
    #
    #
    # 6 Subtitles             :subtitles:
    #
    #     sub-scale-by-window.......scale subtitle font size with window size
    #     sub-color.................subtitle color
    #     sub-font..................subtitle font
    #     sub-font-size.............subtitle font size
    #     sub-margin-y..............subtitle position (vertical)
    #
    #
    # 7 Video                 :video:
    #
    #     profile...................use OpenGL video output driver
    #     hwdec.....................use hardware decoding
    #     correct-downscaling.......extend filter sizes when downscaling
    #     cscale....................chrome scale filter
    #     deband....................enable debanding algorithm
    #     dither-depth..............dither to detected output bit depth
    #     dscale....................downscale filter
    #     opengl-es.................whether to use GLES
    #     opengl-fbo-format.........internal format of textures used for FBOs
    #     opengl-shaders............custom GLSL hooks
    #     scale.....................scale filter
    #     sigmoid-upscaling.........avoid emphasizing ringing artifacts
    #     tscale....................temporal axis scale filter








# 1 Audio {{{1                                                           :audio:
# ============


    # Channel layout or number of channels
    audio-channels=stereo

    # Priority list of audio output drivers to be used
    #     * Add a trailing comma to tell mpv to fall back on drivers not
    #       contained in the list
    ao=pulse








# 2 Behavior {{{1                                                     :behavior:
# ===============


    # Save playback position on quit
    save-position-on-quit








# 3 Cache {{{1                                                           :cache:
# ============


    # Enable cache if needed
    cache=auto

    # Size of the cache in kilobytes (default: 75000 KB)
    cache-default=150000

    # Size of the cache back buffer (default: 75000 KB)
    #     * This will add to the total cache size, and the reserved amount
    #       for seeking playback
    #     * The reserved amount is not used for readahead, instead it
    #       preserves already read data to enable fast seeking back
    cache-backbuffer=150000

    # How many seconds of audio/video to prefetch (default: 10)
    #     * Overrides the `--demuxer-readahead-secs` option only if the
    #       cache is enabled and the value is larger
    cache-secs=20








# 4 Interface {{{1                                                   :interface:
# ================


    # On screen controller options:
    #     * osc-layout...........on screen controller layout
    #     * osc-seekbarstyle.....style of the seekbar
    script-opts=osc-layout=bottombar,osc-seekbarstyle=bar








# 5 Network {{{1                                                       :network:
# ==============


    # Use a browser name as the user agent for HTTP streaming
    #     * Why `Mozilla/5.0`?
    #       http://webaim.org/blog/user-agent-string-history/
    user-agent="Mozilla/5.0"








# 6 Subtitles {{{1                                                   :subtitles:
# ================


    # Don't scale subtitle font size with window size
    #     * Can break ASS subtitles
    sub-scale-by-window=no

    # Subtitle color
    #     * Values range from 0.0 to 1.0
    #          R / G / B / A
    sub-color=1.0/0.8/0.4/0.85

    # Subtitle font
    sub-font=Arimo

    # Subtitle font size
    sub-font-size=36

    # Subtitle position (distance from bottom)
    sub-margin-y=10








# 7 Video {{{1                                                           :video:
# ============

    # Use OpenGL video output driver with high quality settings
    profile=opengl-hq

    # Use hardware decoding
    hwdec=auto

    # When using convolution based filters, extend the filter size when
    # downscaling (opengl-hq default: yes)
    #     * Increases quality, but reduces performance while downscaling
    correct-downscaling=yes

    # Chroma scale filter (opengl-hq default: spline36)
    #     * `ewa_lanczossharp` is a slightly sharpened version of
    #       `ewa_lanczos` (AKA Jinc), configured to use an ideal radius and
    #       parameter. Relatively slow, but very good quality. Recommended
    #       if your hardware can run it.
    cscale=ewa_lanczossharp

    # Enable debanding algorithm (opengl-hq default: yes)
    #     * Greatly reduces the amount of visible banding, blocking, and
    #       other quantization artifacts (does so by very slightly blurring
    #       some of the finest details)
    #     * Only reason to disable would be for performance
    deband=yes

    # Set dither target depth to N (default: no, opengl-hq default: auto)
    #     * no.......disable dithering
    #     * auto.....dither to 8 bit output if output bit depth cannot be
    #                detected
    #     * 8........dither to 8 bit output
    dither-depth=auto

    # Downscaling filter (opengl-hq default: mitchell)
    #     * Mitchell-Netravali filter is very good at downscaling
    dscale=mitchell

    # Whether to use GLES (default: auto)
    #     * yes......try to prefer ES over desktop GL
    #     * no.......try to prefer desktop GL over ES
    #     * auto.....use the default for each backend
    opengl-es=auto

    # Internal format of textures used for FBOs (default: auto)
    #     * Can influence performance and quality, for better or worse
    opengl-fbo-format=rgba32f

    # Custom GLSL hooks
    opengl-shaders="~~/shaders/superxbr--all--1.3-sharpness.hook"

    # Scale filter (opengl-hq default: spline36)
    #     * `ewa_lanczossharp` is a slightly sharpened version of
    #       `ewa_lanczos` (AKA Jinc), configured to use an ideal radius and
    #       parameter. Relatively slow, but very good quality. Recommended
    #       if your hardware can run it.
    scale=ewa_lanczossharp

    # Use a sigmoidal color transform when upscaling to avoid emphasizing
    # ringing artifacts (opengl-hq default: yes)
    #     * Implies `linear-scaling=yes` (scale in linear light)
    sigmoid-upscaling=yes

    # Temporal axis scale (default: mitchell)
    #     * The `oversample` filter is good at temporal interpolation. It
    #       natively oversamples pixels so that overlapping edges get
    #       linearly interpolated instead of rounded. This removes small
    #       imperfections and judder artifacts caused by nearest-neighbor
    #       interpolation, in exchange for adding some blur.
    tscale=oversample
